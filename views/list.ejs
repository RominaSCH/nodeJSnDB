<!doctype html>
<html>
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>List</title>
  </head>
  <body>
<!--HTML에 리스트 넣기 위해 EJS 사용, posts는 server.js에서 지정해둔 이름이당 잊지말라구-->
<h1>Todo List</h1>
   
<% for(var i = 0 ; i < posts.length; i++){ %>
  <tr>
      <td><%= i+1 %></td>
      <td><%= posts[i].todo %></td>
      <td><%= posts[i].dueDate %></td>
      <button>Delete</button>
  </tr><hr>
<% } %>
<!--DELETE 요청하는 법 
1. method-override 라이브러리 이용(node에서 이용 가능), form에서 DELETE를 쓸 수 있게 된다
2.JavaScript AJAX 이용-->
<!-- AJAX는 새로고침 없이 서버에 요청하는 걸 도와주는 JS 문법 -->

<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script>
  //jQuery 문법의 도움을 받은 AJAX 사용
  $.ajax({
    method : "DELETE",
    url : "/list",
    data : "요청과 함께 보낼 데이터"
  }).done(function(결과){
    // AJAX 성공시 실행할 코드는 여기
  }).fail(function(에러){
    // 실패시 실행할 코드는 여기
  });
</script>

<!-- <ol class="list-group list-group-numbered">
  <% for(var i = 0 ; i < posts.length; i++){ %>
  <li class="list-group-item d-flex justify-content-between align-items-start">
    <div class="ms-2 me-auto">
      <div class="fw-bold"><%= posts[i].todo %></div>
      <%= posts[i].dueDate %>
    </div>
    <span class="badge bg-primary rounded-pill">Delete</span>
  </li>
  <% } %>
  </ol> -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  </body>
</html>